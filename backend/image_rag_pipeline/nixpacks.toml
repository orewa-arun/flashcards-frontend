# nixpacks.toml for image_rag_pipeline

# Add the GNU C++ Compiler (gxx) to the build environment.
# This allows pip to compile packages like grpcio-tools from source on Python 3.13.
[phases.setup]
nixPkgs = ["...", "pkgs.gxx"]

# Standard Python installation process. Nixpacks will detect requirements.txt.
[phases.install]
cmds = [
    "pip install --upgrade pip setuptools wheel",
    "pip install --no-cache-dir -r requirements.txt"
]

# Standard start command for the FastAPI server.
[start]
cmd = "uvicorn app.api.server:app --host 0.0.0.0 --port $PORT"

